{"ast":null,"code":"var _jsxFileName = \"/Users/colepatton/Vibe-share/src/components/Post.js\";\nimport React, { Component } from 'react';\nimport profilePicturePlaceholder from '../img/profilePicturePlaceholder.jpg';\nimport '../style/App.css';\nimport queryString from 'query-string';\nimport { getTrack, playAt, pause, getUser } from '../spotifyCalls';\nimport { useHistory, Link } from 'react-router-dom';\nimport { loadLikes, likePost, deleteLike } from '../backendCalls';\n\nclass PostInfo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.reloadUserImg = async () => {\n      this.setState({\n        imgUrl: this.props.profilePic,\n        name: this.props.name,\n        text: this.props.text\n      });\n    };\n\n    this.state = {\n      imgUrl: '',\n      name: ''\n    };\n    this.redirectToUserProfile = this.redirectToUserProfile.bind(this);\n  }\n\n  componentDidMount() {\n    this.reloadUserImg();\n  }\n\n  redirectToUserProfile() {\n    let parsed = queryString.parse(window.location.search);\n    let accessToken = '';\n    if (parsed.access_token) accessToken = parsed.access_token;\n    window.location.href = window.location.origin + '/user/?username=' + this.props.name + '&userId=' + this.props.id + (accessToken ? '&access_token=' + accessToken : '');\n  }\n\n  render() {\n    let name = this.props.name;\n    let text = this.props.text;\n    if (name !== this.state.name || text !== this.state.text) this.reloadUserImg();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"postInfo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"profilePic\",\n      src: this.state.imgUrl ? this.state.imgUrl : profilePicturePlaceholder,\n      onClick: this.redirectToUserProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"username\",\n      onClick: this.redirectToUserProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }\n    }, name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"postText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }\n    }, text)));\n  }\n\n}\n\nclass PostMusic extends Component {\n  constructor(props) {\n    super(props);\n\n    this.routeToSpotify = () => {\n      const history = useHistory();\n      history.push('https://open.spotify.com/track/' + this.props.songId);\n    };\n\n    this.loadTrack = async () => {\n      const albumCover = this.props.songArt;\n      this.setState({\n        picLoaded: true,\n        albumUrl: albumCover,\n        songName: this.props.songName\n      });\n    };\n\n    this.loadImg = async () => {\n      const albumCover = this.props.songArt;\n      this.setState({\n        picLoaded: true,\n        albumUrl: albumCover,\n        songName: this.props.songName\n      });\n    };\n\n    this.state = {\n      picLoaded: false,\n      albumUrl: '',\n      songName: ''\n    };\n    this.routeToSpotify = this.routeToSpotify.bind(this);\n  }\n\n  render() {\n    let songName = this.props.songName;\n    let songArtist = this.props.songArtist;\n\n    if (this.props.loggedIn && this.state.songName != this.props.songName || this.props.loggedIn && !this.state.picLoaded) {\n      this.loadTrack();\n    } else if (this.state.songName !== this.props.songName || !this.state.picLoaded) {\n      this.loadImg();\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"postMusic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"albumImg\",\n      onClick: event => window.location.href = 'https://open.spotify.com/track/' + this.props.songId,\n      src: this.state.picLoaded ? this.state.albumUrl : profilePicturePlaceholder,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"songCredit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"songName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, songName), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"artists\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, songArtist)));\n  }\n\n}\n\nexport default class Post extends Component {\n  constructor(props) {\n    super(props);\n\n    this.pauseSong = async startTime => {\n      pause(this.props.accessToken);\n      this.stopTimer(startTime);\n    };\n\n    this.playSong = async (songId, startTime, endTime) => {\n      playAt(this.props.deviceId, this.props.accessToken, songId, startTime);\n      clearInterval(this.timer);\n      this.timer = '';\n      this.startTimer(startTime, endTime);\n    };\n\n    this.startTimer = async (startTime, endTime) => {\n      this.setState({\n        time: startTime,\n        start: Date.now() - startTime\n      });\n\n      if (!this.timer) {\n        this.timer = setInterval(() => {\n          this.setState({\n            time: Math.floor(Date.now() - this.state.start)\n          });\n\n          if (this.state.time > endTime) {\n            this.pauseSong(startTime);\n          }\n        }, 1000);\n      }\n    };\n\n    this.stopTimer = async startTime => {\n      this.setState({\n        time: startTime\n      });\n      clearInterval(this.timer);\n      this.timer = '';\n    };\n\n    this.handleMouseHover = this.handleMouseHover.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.clickedLikePost = this.clickedLikePost.bind(this);\n    this.state = {\n      playing: false,\n      time: 0,\n      start: 0,\n      accessToken: '',\n      likeCount: 0,\n      liked: false,\n      muted: false,\n      product: '',\n      name: '',\n      text: ''\n    };\n  }\n\n  componentDidMount() {\n    let liked = false;\n    loadLikes().then(likes => {\n      likes.forEach(like => {\n        if (like.postId === this.props.post._id && like.username === this.props.username) {\n          liked = true;\n        }\n      });\n    }).then(() => {\n      if (this.props.accessToken) {\n        getTrack(this.props.accessToken, this.props.post.songId).then(trackData => {\n          this.setState({\n            accessToken: this.props.accessToken,\n            likeCount: this.props.post.likeCount,\n            liked: liked,\n            muted: this.props.muted,\n            songPreviewUrl: trackData.preview_url,\n            product: this.props.product,\n            name: this.props.post.username,\n            text: this.props.post.text\n          });\n        });\n      } else {\n        this.setState({\n          accessToken: this.props.accessToken,\n          likeCount: this.props.post.likeCount,\n          liked: liked,\n          muted: this.props.muted,\n          songPreviewUrl: '',\n          name: this.props.post.username,\n          text: this.props.post.text\n        });\n      }\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.accessToken != prevProps.accessToken) this.setState({\n      accessToken: this.props.accessToken\n    });\n    if (this.props.muted != prevProps.muted) this.setState({\n      muted: this.props.muted\n    });\n\n    if (this.props.post.username !== this.state.name || this.props.post.text !== this.state.text) {\n      let liked = false;\n      loadLikes().then(likes => {\n        likes.forEach(like => {\n          if (like.postId === this.props.post._id && like.username === this.props.username) {\n            liked = true;\n          }\n        });\n      }).then(() => {\n        getTrack(this.props.accessToken, this.props.post.songId).then(trackData => {\n          this.setState({\n            likeCount: this.props.post.likeCount ? this.props.post.likeCount : 0,\n            liked: liked,\n            name: this.props.post.username,\n            text: this.props.post.text\n          });\n        });\n      });\n    }\n  }\n\n  handleMouseHover() {\n    if (!this.props.muted && this.state.product) {\n      if (this.state.product === 'premium') {\n        this.playSong(this.props.post.songId, this.props.post.startTime, this.props.post.stopTime);\n      } else if (this.state.songPreviewUrl) {\n        if (this.state.song) this.state.song.pause();\n        let song = new Audio(this.state.songPreviewUrl);\n        this.setState({\n          song: song\n        });\n        song.play();\n      }\n    }\n  }\n\n  handleMouseLeave() {\n    if (!this.props.muted && this.state.product) {\n      if (this.state.product === 'premium') {\n        setTimeout(() => {\n          this.pauseSong(this.props.post.startTime);\n        }, 100);\n      } else if (this.state.song) {\n        this.state.song.pause();\n      }\n    }\n  }\n\n  clickedLikePost() {\n    if (!this.state.liked) {\n      likePost(this.props.username, this.props.post._id);\n      this.setState({\n        likeCount: this.state.likeCount + 1,\n        liked: true\n      });\n    } else {\n      deleteLike(this.props.username, this.props.post._id);\n      this.setState({\n        likeCount: this.state.likeCount - 1,\n        liked: false\n      });\n    }\n  }\n\n  render() {\n    let post = this.props.post;\n\n    if (this.state.accessToken) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"post\",\n        onTouchStart: this.handleMouseHover,\n        onTouchEnd: this.handleMouseLeave,\n        onMouseEnter: this.handleMouseHover,\n        onMouseLeave: this.handleMouseLeave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"postInner\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(PostInfo, {\n        profilePic: post.profilePic,\n        access_tokenn: this.state.accessToken,\n        name: post.username,\n        text: post.text,\n        id: post.userId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(PostMusic, {\n        songArt: post.songArt,\n        songName: post.songName,\n        songArtist: post.songArtist,\n        songId: post.songId,\n        loggedIn: true,\n        accessToken: this.props.accessToken,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"likeButtonContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: this.state.liked ? 'likedButton' : 'myButtonOrange',\n        onClick: this.clickedLikePost,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 25\n        }\n      }, this.state.liked ? 'Unlike' : 'Like'), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 25\n        }\n      }, this.state.likeCount)));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"post\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"postInner\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(PostInfo, {\n        profilePic: post.profilePic,\n        name: post.username,\n        text: post.text,\n        id: post.userId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(PostMusic, {\n        songArt: post.songArt,\n        songName: post.songName,\n        songArtist: post.songArtist,\n        songId: post.songId,\n        loggedIn: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"likeButtonContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"likeButton myButtonOrange\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 25\n        }\n      }, \"Like\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 25\n        }\n      }, this.state.likeCount)));\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/colepatton/Vibe-share/src/components/Post.js"],"names":["React","Component","profilePicturePlaceholder","queryString","getTrack","playAt","pause","getUser","useHistory","Link","loadLikes","likePost","deleteLike","PostInfo","constructor","props","reloadUserImg","setState","imgUrl","profilePic","name","text","state","redirectToUserProfile","bind","componentDidMount","parsed","parse","window","location","search","accessToken","access_token","href","origin","id","render","PostMusic","routeToSpotify","history","push","songId","loadTrack","albumCover","songArt","picLoaded","albumUrl","songName","loadImg","songArtist","loggedIn","event","Post","pauseSong","startTime","stopTimer","playSong","endTime","deviceId","clearInterval","timer","startTimer","time","start","Date","now","setInterval","Math","floor","handleMouseHover","handleMouseLeave","clickedLikePost","playing","likeCount","liked","muted","product","then","likes","forEach","like","postId","post","_id","username","trackData","songPreviewUrl","preview_url","componentDidUpdate","prevProps","stopTime","song","Audio","play","setTimeout","userId"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,yBAAP,MAAsC,sCAAtC;AACA,OAAO,kBAAP;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,SAASC,QAAT,EAAmBC,MAAnB,EAA2BC,KAA3B,EAAkCC,OAAlC,QAAiD,iBAAjD;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,kBAAjC;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,UAA9B,QAAgD,iBAAhD;;AAEA,MAAMC,QAAN,SAAuBZ,SAAvB,CAAiC;AAC7Ba,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAWnBC,aAXmB,GAWH,YAAY;AACxB,WAAKC,QAAL,CAAc;AACVC,QAAAA,MAAM,EAAE,KAAKH,KAAL,CAAWI,UADT;AAEVC,QAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWK,IAFP;AAGVC,QAAAA,IAAI,EAAE,KAAKN,KAAL,CAAWM;AAHP,OAAd;AAKH,KAjBkB;;AAEf,SAAKC,KAAL,GAAa;AACTJ,MAAAA,MAAM,EAAE,EADC;AAETE,MAAAA,IAAI,EAAE;AAFG,KAAb;AAIA,SAAKG,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BC,IAA3B,CAAgC,IAAhC,CAA7B;AACH;;AACDC,EAAAA,iBAAiB,GAAG;AAChB,SAAKT,aAAL;AACH;;AAQDO,EAAAA,qBAAqB,GAAG;AACpB,QAAIG,MAAM,GAAGvB,WAAW,CAACwB,KAAZ,CAAkBC,MAAM,CAACC,QAAP,CAAgBC,MAAlC,CAAb;AACA,QAAIC,WAAW,GAAG,EAAlB;AACA,QAAIL,MAAM,CAACM,YAAX,EACID,WAAW,GAAGL,MAAM,CAACM,YAArB;AAEJJ,IAAAA,MAAM,CAACC,QAAP,CAAgBI,IAAhB,GAAuBL,MAAM,CAACC,QAAP,CAAgBK,MAAhB,GACnB,kBADmB,GACE,KAAKnB,KAAL,CAAWK,IADb,GAEnB,UAFmB,GAEN,KAAKL,KAAL,CAAWoB,EAFL,IAGlBJ,WAAW,GAAI,mBAAmBA,WAAvB,GAAsC,EAH/B,CAAvB;AAIH;;AACDK,EAAAA,MAAM,GAAG;AACL,QAAIhB,IAAI,GAAG,KAAKL,KAAL,CAAWK,IAAtB;AACA,QAAIC,IAAI,GAAG,KAAKN,KAAL,CAAWM,IAAtB;AACA,QAAID,IAAI,KAAK,KAAKE,KAAL,CAAWF,IAApB,IAA4BC,IAAI,KAAK,KAAKC,KAAL,CAAWD,IAApD,EACI,KAAKL,aAAL;AAEJ,wBACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,GAAG,EAAE,KAAKM,KAAL,CAAWJ,MAAX,GAAoB,KAAKI,KAAL,CAAWJ,MAA/B,GAAwChB,yBAAzE;AACI,MAAA,OAAO,EAAE,KAAKqB,qBADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,SAAS,EAAC,UAAd;AAAyB,MAAA,OAAO,EAAE,KAAKA,qBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+DH,IAA/D,CADJ,eAEI;AAAG,MAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBC,IAAzB,CAFJ,CAHJ,CADJ;AAUH;;AA9C4B;;AAiDjC,MAAMgB,SAAN,SAAwBpC,SAAxB,CAAkC;AAC9Ba,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SASnBuB,cATmB,GASF,MAAM;AACnB,YAAMC,OAAO,GAAG/B,UAAU,EAA1B;AACA+B,MAAAA,OAAO,CAACC,IAAR,CAAa,oCAAoC,KAAKzB,KAAL,CAAW0B,MAA5D;AACH,KAZkB;;AAAA,SAanBC,SAbmB,GAaP,YAAY;AACpB,YAAMC,UAAU,GAAG,KAAK5B,KAAL,CAAW6B,OAA9B;AACA,WAAK3B,QAAL,CAAc;AACV4B,QAAAA,SAAS,EAAE,IADD;AAEVC,QAAAA,QAAQ,EAAEH,UAFA;AAGVI,QAAAA,QAAQ,EAAE,KAAKhC,KAAL,CAAWgC;AAHX,OAAd;AAKH,KApBkB;;AAAA,SAqBnBC,OArBmB,GAqBT,YAAY;AAClB,YAAML,UAAU,GAAG,KAAK5B,KAAL,CAAW6B,OAA9B;AACA,WAAK3B,QAAL,CAAc;AACV4B,QAAAA,SAAS,EAAE,IADD;AAEVC,QAAAA,QAAQ,EAAEH,UAFA;AAGVI,QAAAA,QAAQ,EAAE,KAAKhC,KAAL,CAAWgC;AAHX,OAAd;AAKH,KA5BkB;;AAEf,SAAKzB,KAAL,GAAa;AACTuB,MAAAA,SAAS,EAAE,KADF;AAETC,MAAAA,QAAQ,EAAE,EAFD;AAGTC,MAAAA,QAAQ,EAAE;AAHD,KAAb;AAKA,SAAKT,cAAL,GAAsB,KAAKA,cAAL,CAAoBd,IAApB,CAAyB,IAAzB,CAAtB;AACH;;AAqBDY,EAAAA,MAAM,GAAG;AACL,QAAIW,QAAQ,GAAG,KAAKhC,KAAL,CAAWgC,QAA1B;AACA,QAAIE,UAAU,GAAG,KAAKlC,KAAL,CAAWkC,UAA5B;;AACA,QAAK,KAAKlC,KAAL,CAAWmC,QAAX,IAAwB,KAAK5B,KAAL,CAAWyB,QAAX,IAAuB,KAAKhC,KAAL,CAAWgC,QAA3D,IAA0E,KAAKhC,KAAL,CAAWmC,QAAX,IAAuB,CAAC,KAAK5B,KAAL,CAAWuB,SAAjH,EAA6H;AACzH,WAAKH,SAAL;AACH,KAFD,MAEO,IAAK,KAAKpB,KAAL,CAAWyB,QAAX,KAAwB,KAAKhC,KAAL,CAAWgC,QAApC,IAAiD,CAAC,KAAKzB,KAAL,CAAWuB,SAAjE,EAA4E;AAC/E,WAAKG,OAAL;AACH;;AACD,wBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,UAAf;AACI,MAAA,OAAO,EAAEG,KAAK,IAAIvB,MAAM,CAACC,QAAP,CAAgBI,IAAhB,GAAuB,oCAAoC,KAAKlB,KAAL,CAAW0B,MAD5F;AAEI,MAAA,GAAG,EAAE,KAAKnB,KAAL,CAAWuB,SAAX,GAAuB,KAAKvB,KAAL,CAAWwB,QAAlC,GAA6C5C,yBAFtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAKI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA0B6C,QAA1B,CADJ,eAEI;AAAG,MAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwBE,UAAxB,CAFJ,CALJ,CADJ;AAYH;;AAlD6B;;AAqDlC,eAAe,MAAMG,IAAN,SAAmBnD,SAAnB,CAA6B;AACxCa,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA8EnBsC,SA9EmB,GA8EP,MAAOC,SAAP,IAAqB;AAC7BhD,MAAAA,KAAK,CAAC,KAAKS,KAAL,CAAWgB,WAAZ,CAAL;AACA,WAAKwB,SAAL,CAAeD,SAAf;AACH,KAjFkB;;AAAA,SAkFnBE,QAlFmB,GAkFR,OAAOf,MAAP,EAAea,SAAf,EAA0BG,OAA1B,KAAsC;AAC7CpD,MAAAA,MAAM,CAAC,KAAKU,KAAL,CAAW2C,QAAZ,EAAsB,KAAK3C,KAAL,CAAWgB,WAAjC,EAA8CU,MAA9C,EAAsDa,SAAtD,CAAN;AACAK,MAAAA,aAAa,CAAC,KAAKC,KAAN,CAAb;AACA,WAAKA,KAAL,GAAa,EAAb;AACA,WAAKC,UAAL,CAAgBP,SAAhB,EAA2BG,OAA3B;AACH,KAvFkB;;AAAA,SAwFnBI,UAxFmB,GAwFN,OAAOP,SAAP,EAAkBG,OAAlB,KAA8B;AACvC,WAAKxC,QAAL,CAAc;AACV6C,QAAAA,IAAI,EAAER,SADI;AAEVS,QAAAA,KAAK,EAAEC,IAAI,CAACC,GAAL,KAAaX;AAFV,OAAd;;AAIA,UAAI,CAAC,KAAKM,KAAV,EAAiB;AACb,aAAKA,KAAL,GAAaM,WAAW,CAAC,MAAM;AAC3B,eAAKjD,QAAL,CAAc;AACV6C,YAAAA,IAAI,EAAEK,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACC,GAAL,KAAa,KAAK3C,KAAL,CAAWyC,KAAnC;AADI,WAAd;;AAGA,cAAI,KAAKzC,KAAL,CAAWwC,IAAX,GAAkBL,OAAtB,EAA+B;AAC3B,iBAAKJ,SAAL,CAAeC,SAAf;AACH;AACJ,SAPuB,EAOrB,IAPqB,CAAxB;AAQH;AACJ,KAvGkB;;AAAA,SAwGnBC,SAxGmB,GAwGP,MAAOD,SAAP,IAAqB;AAC7B,WAAKrC,QAAL,CAAc;AACV6C,QAAAA,IAAI,EAAER;AADI,OAAd;AAGAK,MAAAA,aAAa,CAAC,KAAKC,KAAN,CAAb;AACA,WAAKA,KAAL,GAAa,EAAb;AACH,KA9GkB;;AAEf,SAAKS,gBAAL,GAAwB,KAAKA,gBAAL,CAAsB7C,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAK8C,gBAAL,GAAwB,KAAKA,gBAAL,CAAsB9C,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAK+C,eAAL,GAAuB,KAAKA,eAAL,CAAqB/C,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKF,KAAL,GAAa;AACTkD,MAAAA,OAAO,EAAE,KADA;AAETV,MAAAA,IAAI,EAAE,CAFG;AAGTC,MAAAA,KAAK,EAAE,CAHE;AAIThC,MAAAA,WAAW,EAAE,EAJJ;AAKT0C,MAAAA,SAAS,EAAE,CALF;AAMTC,MAAAA,KAAK,EAAE,KANE;AAOTC,MAAAA,KAAK,EAAE,KAPE;AAQTC,MAAAA,OAAO,EAAE,EARA;AASTxD,MAAAA,IAAI,EAAE,EATG;AAUTC,MAAAA,IAAI,EAAE;AAVG,KAAb;AAYH;;AACDI,EAAAA,iBAAiB,GAAG;AAChB,QAAIiD,KAAK,GAAG,KAAZ;AACAhE,IAAAA,SAAS,GAAGmE,IAAZ,CAAiBC,KAAK,IAAI;AACtBA,MAAAA,KAAK,CAACC,OAAN,CAAcC,IAAI,IAAI;AAClB,YAAIA,IAAI,CAACC,MAAL,KAAgB,KAAKlE,KAAL,CAAWmE,IAAX,CAAgBC,GAAhC,IAAuCH,IAAI,CAACI,QAAL,KAAkB,KAAKrE,KAAL,CAAWqE,QAAxE,EAAkF;AAC9EV,UAAAA,KAAK,GAAG,IAAR;AACH;AACJ,OAJD;AAKH,KAND,EAMGG,IANH,CAMQ,MAAM;AACV,UAAI,KAAK9D,KAAL,CAAWgB,WAAf,EAA4B;AACxB3B,QAAAA,QAAQ,CAAC,KAAKW,KAAL,CAAWgB,WAAZ,EAAyB,KAAKhB,KAAL,CAAWmE,IAAX,CAAgBzC,MAAzC,CAAR,CAAyDoC,IAAzD,CAA8DQ,SAAS,IAAI;AACvE,eAAKpE,QAAL,CAAc;AACVc,YAAAA,WAAW,EAAE,KAAKhB,KAAL,CAAWgB,WADd;AAEV0C,YAAAA,SAAS,EAAE,KAAK1D,KAAL,CAAWmE,IAAX,CAAgBT,SAFjB;AAGVC,YAAAA,KAAK,EAAEA,KAHG;AAIVC,YAAAA,KAAK,EAAE,KAAK5D,KAAL,CAAW4D,KAJR;AAKVW,YAAAA,cAAc,EAAED,SAAS,CAACE,WALhB;AAMVX,YAAAA,OAAO,EAAE,KAAK7D,KAAL,CAAW6D,OANV;AAOVxD,YAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWmE,IAAX,CAAgBE,QAPZ;AAQV/D,YAAAA,IAAI,EAAE,KAAKN,KAAL,CAAWmE,IAAX,CAAgB7D;AARZ,WAAd;AAUH,SAXD;AAYH,OAbD,MAaO;AACH,aAAKJ,QAAL,CAAc;AACVc,UAAAA,WAAW,EAAE,KAAKhB,KAAL,CAAWgB,WADd;AAEV0C,UAAAA,SAAS,EAAE,KAAK1D,KAAL,CAAWmE,IAAX,CAAgBT,SAFjB;AAGVC,UAAAA,KAAK,EAAEA,KAHG;AAIVC,UAAAA,KAAK,EAAE,KAAK5D,KAAL,CAAW4D,KAJR;AAKVW,UAAAA,cAAc,EAAE,EALN;AAMVlE,UAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWmE,IAAX,CAAgBE,QANZ;AAOV/D,UAAAA,IAAI,EAAE,KAAKN,KAAL,CAAWmE,IAAX,CAAgB7D;AAPZ,SAAd;AASH;AACJ,KA/BD;AAgCH;;AACDmE,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAC1B,QAAI,KAAK1E,KAAL,CAAWgB,WAAX,IAA0B0D,SAAS,CAAC1D,WAAxC,EACI,KAAKd,QAAL,CAAc;AAAEc,MAAAA,WAAW,EAAE,KAAKhB,KAAL,CAAWgB;AAA1B,KAAd;AACJ,QAAI,KAAKhB,KAAL,CAAW4D,KAAX,IAAoBc,SAAS,CAACd,KAAlC,EACI,KAAK1D,QAAL,CAAc;AAAE0D,MAAAA,KAAK,EAAE,KAAK5D,KAAL,CAAW4D;AAApB,KAAd;;AACJ,QAAI,KAAK5D,KAAL,CAAWmE,IAAX,CAAgBE,QAAhB,KAA6B,KAAK9D,KAAL,CAAWF,IAAxC,IAAgD,KAAKL,KAAL,CAAWmE,IAAX,CAAgB7D,IAAhB,KAAyB,KAAKC,KAAL,CAAWD,IAAxF,EAA8F;AAC1F,UAAIqD,KAAK,GAAG,KAAZ;AACAhE,MAAAA,SAAS,GAAGmE,IAAZ,CAAiBC,KAAK,IAAI;AACtBA,QAAAA,KAAK,CAACC,OAAN,CAAcC,IAAI,IAAI;AAClB,cAAIA,IAAI,CAACC,MAAL,KAAgB,KAAKlE,KAAL,CAAWmE,IAAX,CAAgBC,GAAhC,IAAuCH,IAAI,CAACI,QAAL,KAAkB,KAAKrE,KAAL,CAAWqE,QAAxE,EAAkF;AAC9EV,YAAAA,KAAK,GAAG,IAAR;AACH;AACJ,SAJD;AAKH,OAND,EAMGG,IANH,CAMQ,MAAM;AACVzE,QAAAA,QAAQ,CAAC,KAAKW,KAAL,CAAWgB,WAAZ,EAAyB,KAAKhB,KAAL,CAAWmE,IAAX,CAAgBzC,MAAzC,CAAR,CAAyDoC,IAAzD,CAA8DQ,SAAS,IAAI;AACvE,eAAKpE,QAAL,CAAc;AACVwD,YAAAA,SAAS,EAAE,KAAK1D,KAAL,CAAWmE,IAAX,CAAgBT,SAAhB,GAA4B,KAAK1D,KAAL,CAAWmE,IAAX,CAAgBT,SAA5C,GAAwD,CADzD;AAEVC,YAAAA,KAAK,EAAEA,KAFG;AAGVtD,YAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWmE,IAAX,CAAgBE,QAHZ;AAIV/D,YAAAA,IAAI,EAAE,KAAKN,KAAL,CAAWmE,IAAX,CAAgB7D;AAJZ,WAAd;AAMH,SAPD;AAQH,OAfD;AAgBH;AACJ;;AAkCDgD,EAAAA,gBAAgB,GAAG;AACf,QAAI,CAAC,KAAKtD,KAAL,CAAW4D,KAAZ,IAAqB,KAAKrD,KAAL,CAAWsD,OAApC,EAA6C;AACzC,UAAI,KAAKtD,KAAL,CAAWsD,OAAX,KAAuB,SAA3B,EAAsC;AAClC,aAAKpB,QAAL,CAAc,KAAKzC,KAAL,CAAWmE,IAAX,CAAgBzC,MAA9B,EAAsC,KAAK1B,KAAL,CAAWmE,IAAX,CAAgB5B,SAAtD,EAAiE,KAAKvC,KAAL,CAAWmE,IAAX,CAAgBQ,QAAjF;AACH,OAFD,MAEO,IAAI,KAAKpE,KAAL,CAAWgE,cAAf,EAA+B;AAClC,YAAI,KAAKhE,KAAL,CAAWqE,IAAf,EACI,KAAKrE,KAAL,CAAWqE,IAAX,CAAgBrF,KAAhB;AACJ,YAAIqF,IAAI,GAAG,IAAIC,KAAJ,CAAU,KAAKtE,KAAL,CAAWgE,cAArB,CAAX;AACA,aAAKrE,QAAL,CAAc;AACV0E,UAAAA,IAAI,EAAEA;AADI,SAAd;AAGAA,QAAAA,IAAI,CAACE,IAAL;AACH;AACJ;AACJ;;AACDvB,EAAAA,gBAAgB,GAAG;AACf,QAAI,CAAC,KAAKvD,KAAL,CAAW4D,KAAZ,IAAqB,KAAKrD,KAAL,CAAWsD,OAApC,EAA6C;AACzC,UAAI,KAAKtD,KAAL,CAAWsD,OAAX,KAAuB,SAA3B,EAAsC;AAClCkB,QAAAA,UAAU,CAAE,MAAM;AACd,eAAKzC,SAAL,CAAe,KAAKtC,KAAL,CAAWmE,IAAX,CAAgB5B,SAA/B;AACH,SAFS,EAEN,GAFM,CAAV;AAGH,OAJD,MAIO,IAAI,KAAKhC,KAAL,CAAWqE,IAAf,EAAqB;AACxB,aAAKrE,KAAL,CAAWqE,IAAX,CAAgBrF,KAAhB;AACH;AACJ;AACJ;;AACDiE,EAAAA,eAAe,GAAG;AACd,QAAI,CAAC,KAAKjD,KAAL,CAAWoD,KAAhB,EAAuB;AACnB/D,MAAAA,QAAQ,CAAC,KAAKI,KAAL,CAAWqE,QAAZ,EAAsB,KAAKrE,KAAL,CAAWmE,IAAX,CAAgBC,GAAtC,CAAR;AACA,WAAKlE,QAAL,CAAc;AAAEwD,QAAAA,SAAS,EAAG,KAAKnD,KAAL,CAAWmD,SAAX,GAAuB,CAArC;AAAyCC,QAAAA,KAAK,EAAE;AAAhD,OAAd;AACH,KAHD,MAGO;AACH9D,MAAAA,UAAU,CAAC,KAAKG,KAAL,CAAWqE,QAAZ,EAAsB,KAAKrE,KAAL,CAAWmE,IAAX,CAAgBC,GAAtC,CAAV;AACA,WAAKlE,QAAL,CAAc;AAAEwD,QAAAA,SAAS,EAAG,KAAKnD,KAAL,CAAWmD,SAAX,GAAuB,CAArC;AAAyCC,QAAAA,KAAK,EAAE;AAAhD,OAAd;AACH;AACJ;;AACDtC,EAAAA,MAAM,GAAG;AACL,QAAI8C,IAAI,GAAG,KAAKnE,KAAL,CAAWmE,IAAtB;;AACA,QAAI,KAAK5D,KAAL,CAAWS,WAAf,EAA4B;AACxB,0BACI;AAAK,QAAA,SAAS,EAAC,MAAf;AAAsB,QAAA,YAAY,EAAE,KAAKsC,gBAAzC;AAA2D,QAAA,UAAU,EAAE,KAAKC,gBAA5E;AACI,QAAA,YAAY,EAAE,KAAKD,gBADvB;AACyC,QAAA,YAAY,EAAE,KAAKC,gBAD5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,QAAD;AAAU,QAAA,UAAU,EAAEY,IAAI,CAAC/D,UAA3B;AAAuC,QAAA,aAAa,EAAE,KAAKG,KAAL,CAAWS,WAAjE;AAA8E,QAAA,IAAI,EAAEmD,IAAI,CAACE,QAAzF;AAAmG,QAAA,IAAI,EAAEF,IAAI,CAAC7D,IAA9G;AAAoH,QAAA,EAAE,EAAE6D,IAAI,CAACa,MAA7H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,eAEI,oBAAC,SAAD;AAAW,QAAA,OAAO,EAAEb,IAAI,CAACtC,OAAzB;AAAkC,QAAA,QAAQ,EAAEsC,IAAI,CAACnC,QAAjD;AAA2D,QAAA,UAAU,EAAEmC,IAAI,CAACjC,UAA5E;AAAwF,QAAA,MAAM,EAAEiC,IAAI,CAACzC,MAArG;AAA6G,QAAA,QAAQ,EAAE,IAAvH;AAA6H,QAAA,WAAW,EAAE,KAAK1B,KAAL,CAAWgB,WAArJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAFJ,eAMI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAQ,QAAA,SAAS,EAAG,KAAKT,KAAL,CAAWoD,KAAX,GAAmB,aAAnB,GAAmC,gBAAvD;AACI,QAAA,OAAO,EAAE,KAAKH,eADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEK,KAAKjD,KAAL,CAAWoD,KAAX,GAAmB,QAAnB,GAA8B,MAFnC,CADJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,KAAKpD,KAAL,CAAWmD,SAAf,CALJ,CANJ,CADJ;AAgBH,KAjBD,MAiBO;AACH,0BACI;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,QAAD;AAAU,QAAA,UAAU,EAAES,IAAI,CAAC/D,UAA3B;AAAuC,QAAA,IAAI,EAAE+D,IAAI,CAACE,QAAlD;AAA4D,QAAA,IAAI,EAAEF,IAAI,CAAC7D,IAAvE;AAA6E,QAAA,EAAE,EAAE6D,IAAI,CAACa,MAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,eAEI,oBAAC,SAAD;AAAW,QAAA,OAAO,EAAEb,IAAI,CAACtC,OAAzB;AAAkC,QAAA,QAAQ,EAAEsC,IAAI,CAACnC,QAAjD;AAA2D,QAAA,UAAU,EAAEmC,IAAI,CAACjC,UAA5E;AAAwF,QAAA,MAAM,EAAEiC,IAAI,CAACzC,MAArG;AAA6G,QAAA,QAAQ,EAAE,KAAvH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CADJ,eAKI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAQ,QAAA,SAAS,EAAC,2BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,KAAKnB,KAAL,CAAWmD,SAAf,CAFJ,CALJ,CADJ;AAYH;AACJ;;AApLuC","sourcesContent":["import React, { Component } from 'react';\nimport profilePicturePlaceholder from '../img/profilePicturePlaceholder.jpg';\nimport '../style/App.css';\nimport queryString from 'query-string';\nimport { getTrack, playAt, pause, getUser } from '../spotifyCalls';\nimport { useHistory, Link } from 'react-router-dom';\nimport { loadLikes, likePost, deleteLike } from '../backendCalls';\n\nclass PostInfo extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imgUrl: '',\n            name: ''\n        };\n        this.redirectToUserProfile = this.redirectToUserProfile.bind(this);\n    }\n    componentDidMount() {\n        this.reloadUserImg();\n    }\n    reloadUserImg = async () => {\n        this.setState({\n            imgUrl: this.props.profilePic,\n            name: this.props.name,\n            text: this.props.text\n        });\n    }\n    redirectToUserProfile() {\n        let parsed = queryString.parse(window.location.search);\n        let accessToken = ''\n        if (parsed.access_token)\n            accessToken = parsed.access_token;\n\n        window.location.href = window.location.origin +\n            '/user/?username=' + this.props.name +\n            '&userId=' + this.props.id +\n            (accessToken ? ('&access_token=' + accessToken) : '');\n    }\n    render() {\n        let name = this.props.name;\n        let text = this.props.text;\n        if (name !== this.state.name || text !== this.state.text)\n            this.reloadUserImg();\n\n        return (\n            <div className=\"postInfo\">\n                <img className=\"profilePic\" src={this.state.imgUrl ? this.state.imgUrl : profilePicturePlaceholder}\n                    onClick={this.redirectToUserProfile}></img>\n                <div>\n                    <h3 className=\"username\" onClick={this.redirectToUserProfile}>{name}</h3>\n                    <p className=\"postText\">{text}</p>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass PostMusic extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            picLoaded: false,\n            albumUrl: '',\n            songName: ''\n        };\n        this.routeToSpotify = this.routeToSpotify.bind(this);\n    }\n    routeToSpotify = () => {\n        const history = useHistory();\n        history.push('https://open.spotify.com/track/' + this.props.songId);\n    }\n    loadTrack = async () => {\n        const albumCover = this.props.songArt;\n        this.setState({\n            picLoaded: true,\n            albumUrl: albumCover,\n            songName: this.props.songName\n        });\n    }\n    loadImg = async () => {\n        const albumCover = this.props.songArt;\n        this.setState({\n            picLoaded: true,\n            albumUrl: albumCover,\n            songName: this.props.songName\n        });\n    }\n    render() {\n        let songName = this.props.songName;\n        let songArtist = this.props.songArtist;\n        if ((this.props.loggedIn && (this.state.songName != this.props.songName)) || (this.props.loggedIn && !this.state.picLoaded)) {\n            this.loadTrack();\n        } else if ((this.state.songName !== this.props.songName) || !this.state.picLoaded) {\n            this.loadImg();\n        }\n        return (\n            <div className=\"postMusic\">\n                <img className=\"albumImg\"\n                    onClick={event => window.location.href = 'https://open.spotify.com/track/' + this.props.songId}\n                    src={this.state.picLoaded ? this.state.albumUrl : profilePicturePlaceholder}>\n                </img>\n                <div className=\"songCredit\">\n                    <h4 className=\"songName\">{songName}</h4>\n                    <p className=\"artists\">{songArtist}</p>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default class Post extends Component {\n    constructor(props) {\n        super(props);\n        this.handleMouseHover = this.handleMouseHover.bind(this);\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\n        this.clickedLikePost = this.clickedLikePost.bind(this);\n        this.state = {\n            playing: false,\n            time: 0,\n            start: 0,\n            accessToken: '',\n            likeCount: 0,\n            liked: false,\n            muted: false,\n            product: '',\n            name: '',\n            text: ''\n        };\n    }\n    componentDidMount() {\n        let liked = false;\n        loadLikes().then(likes => {\n            likes.forEach(like => {\n                if (like.postId === this.props.post._id && like.username === this.props.username) {\n                    liked = true;\n                }\n            });\n        }).then(() => {\n            if (this.props.accessToken) {\n                getTrack(this.props.accessToken, this.props.post.songId).then(trackData => {\n                    this.setState({\n                        accessToken: this.props.accessToken,\n                        likeCount: this.props.post.likeCount,\n                        liked: liked,\n                        muted: this.props.muted,\n                        songPreviewUrl: trackData.preview_url,\n                        product: this.props.product,\n                        name: this.props.post.username,\n                        text: this.props.post.text\n                    });\n                });\n            } else {\n                this.setState({\n                    accessToken: this.props.accessToken,\n                    likeCount: this.props.post.likeCount,\n                    liked: liked,\n                    muted: this.props.muted,\n                    songPreviewUrl: '',\n                    name: this.props.post.username,\n                    text: this.props.post.text\n                });\n            }\n        });\n    }\n    componentDidUpdate(prevProps) {\n        if (this.props.accessToken != prevProps.accessToken)\n            this.setState({ accessToken: this.props.accessToken });\n        if (this.props.muted != prevProps.muted)\n            this.setState({ muted: this.props.muted });\n        if (this.props.post.username !== this.state.name || this.props.post.text !== this.state.text) {\n            let liked = false;\n            loadLikes().then(likes => {\n                likes.forEach(like => {\n                    if (like.postId === this.props.post._id && like.username === this.props.username) {\n                        liked = true;\n                    }\n                });\n            }).then(() => {\n                getTrack(this.props.accessToken, this.props.post.songId).then(trackData => {\n                    this.setState({\n                        likeCount: this.props.post.likeCount ? this.props.post.likeCount : 0,\n                        liked: liked,\n                        name: this.props.post.username,\n                        text: this.props.post.text\n                    });\n                });\n            });\n        }\n    }\n    pauseSong = async (startTime) => {\n        pause(this.props.accessToken)\n        this.stopTimer(startTime);\n    }\n    playSong = async (songId, startTime, endTime) => {\n        playAt(this.props.deviceId, this.props.accessToken, songId, startTime);\n        clearInterval(this.timer);\n        this.timer = '';\n        this.startTimer(startTime, endTime);\n    }\n    startTimer = async (startTime, endTime) => {\n        this.setState({\n            time: startTime,\n            start: Date.now() - startTime\n        });\n        if (!this.timer) {\n            this.timer = setInterval(() => {\n                this.setState({\n                    time: Math.floor(Date.now() - this.state.start),\n                });\n                if (this.state.time > endTime) {\n                    this.pauseSong(startTime);\n                }\n            }, 1000);\n        }\n    }\n    stopTimer = async (startTime) => {\n        this.setState({\n            time: startTime,\n        });\n        clearInterval(this.timer);\n        this.timer = '';\n    }\n    handleMouseHover() {\n        if (!this.props.muted && this.state.product) {\n            if (this.state.product === 'premium') {\n                this.playSong(this.props.post.songId, this.props.post.startTime, this.props.post.stopTime);\n            } else if (this.state.songPreviewUrl) {\n                if (this.state.song)\n                    this.state.song.pause();\n                let song = new Audio(this.state.songPreviewUrl);\n                this.setState({\n                    song: song\n                });\n                song.play();\n            }\n        }\n    }\n    handleMouseLeave() {\n        if (!this.props.muted && this.state.product) {\n            if (this.state.product === 'premium') {\n                setTimeout((() => {\n                    this.pauseSong(this.props.post.startTime);\n                }), 100);\n            } else if (this.state.song) {\n                this.state.song.pause();\n            }\n        }\n    }\n    clickedLikePost() {\n        if (!this.state.liked) {\n            likePost(this.props.username, this.props.post._id);\n            this.setState({ likeCount: (this.state.likeCount + 1), liked: true });\n        } else {\n            deleteLike(this.props.username, this.props.post._id);\n            this.setState({ likeCount: (this.state.likeCount - 1), liked: false });\n        }\n    }\n    render() {\n        let post = this.props.post;\n        if (this.state.accessToken) {\n            return (\n                <div className=\"post\" onTouchStart={this.handleMouseHover} onTouchEnd={this.handleMouseLeave}\n                    onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseLeave}>\n                    <div className=\"postInner\">\n                        <PostInfo profilePic={post.profilePic} access_tokenn={this.state.accessToken} name={post.username} text={post.text} id={post.userId} />\n                        <PostMusic songArt={post.songArt} songName={post.songName} songArtist={post.songArtist} songId={post.songId} loggedIn={true} accessToken={this.props.accessToken} />\n                    </div>\n                    <div className='likeButtonContainer'>\n                        <button className={(this.state.liked ? 'likedButton' : 'myButtonOrange')}\n                            onClick={this.clickedLikePost}>\n                            {this.state.liked ? 'Unlike' : 'Like'}\n                        </button>\n                        <p>{this.state.likeCount}</p>\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"post\">\n                    <div className='postInner'>\n                        <PostInfo profilePic={post.profilePic} name={post.username} text={post.text} id={post.userId} />\n                        <PostMusic songArt={post.songArt} songName={post.songName} songArtist={post.songArtist} songId={post.songId} loggedIn={false} />\n                    </div>\n                    <div className='likeButtonContainer'>\n                        <button className='likeButton myButtonOrange'>Like</button>\n                        <p>{this.state.likeCount}</p>\n                    </div>\n                </div>\n            );\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}